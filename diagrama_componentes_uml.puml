@startuml DiagramaComponentesRehaVR
!theme plain
skinparam componentStyle rectangle
skinparam shadowing false
skinparam linetype ortho

title Diagrama de Componentes UML - Sistema RehaVR\nArquitectura de Componentes y Dependencias

package "Frontend" {
    component [Templates HTML] as Templates
    component [Assets CSS/JS] as Assets
    component [Vite Build] as Vite
}

package "Backend - Capa Web" {
    component [Flask Application] as FlaskApp
    component [Blueprints] as Blueprints
    component [Error Handlers] as Errors
}

package "Backend - Capa de Control" {
    component [Auth Controller] as AuthCtrl
    component [Ejercicio Controller] as EjercCtrl
}

package "Backend - Capa de Negocio" {
    component [Paciente Service] as PacienteSvc
    component [Ejercicio Service] as EjercSvc
}

package "Backend - Capa de Datos" {
    component [Paciente Repository] as PacienteRepo
    component [Ejercicio Repository] as EjercRepo
    component [Models] as Models
}

package "Backend - Base de Datos" {
    component [MySQL Manager] as MySQLMgr
    component [Connection Pool] as ConnPool
    database "MySQL Database" as MySQL
}

package "Configuración" {
    component [Settings] as Settings
    component [Environment Config] as EnvConfig
}

' Relaciones Frontend
Templates --> FlaskApp : "renderiza"
Assets --> FlaskApp : "sirve"
Vite --> Templates : "compila"

' Relaciones Backend Web
FlaskApp --> Blueprints : "registra"
FlaskApp --> Errors : "maneja"
FlaskApp --> Settings : "usa"
Blueprints --> AuthCtrl : "delega"
Blueprints --> EjercCtrl : "delega"

' Relaciones Controladores
AuthCtrl --> PacienteSvc : "usa"
EjercCtrl --> EjercSvc : "usa"
EjercCtrl --> PacienteSvc : "usa"

' Relaciones Servicios
PacienteSvc --> PacienteRepo : "usa"
PacienteSvc --> EjercRepo : "usa"
EjercSvc --> EjercRepo : "usa"

' Relaciones Repositorios
PacienteRepo --> Models : "maneja"
EjercRepo --> Models : "maneja"

' Relaciones Base de Datos
MySQLMgr --> ConnPool : "usa"
ConnPool --> MySQL : "conecta"
PacienteRepo --> MySQLMgr : "opcional"
EjercRepo --> MySQLMgr : "opcional"

' Relaciones Configuración
Settings --> EnvConfig : "lee"
FlaskApp --> EnvConfig : "usa"

note right of FlaskApp
  **Punto de Entrada**
  Aplicación Flask principal
  que orquesta todos los
  componentes del sistema
end note

note right of PacienteSvc
  **Lógica de Negocio**
  Validaciones, reglas
  de negocio y
  transformaciones
end note

note right of PacienteRepo
  **Abstracción de Datos**
  Permite cambiar entre
  JSON y MySQL sin
  afectar servicios
end note

@enduml






